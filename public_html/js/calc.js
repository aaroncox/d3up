Object.keys||(Object.keys=function(e){var t=[],n;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}),String.prototype.capitalize=function(){return this.replace(/(^|\s)([a-z])/g,function(e,t,n){return t+n.toUpperCase()})},$(function(){function l(t,n,r,i){e[t]=n;switch(r){case"per":n+="%";break;default:}var s="";s=t.replace(/\s+/g,"-").toLowerCase();var o=$("<li/>").addClass("stat-"+s).html($("<span class='stat-helper'/>").html(t+": ")).append(n);return i&&o.append(" ("+i+"%)"),o}function c(e){var s=[],f=[],c=[],h={},p=!1;$(".equipped a").each(function(){if($(this).attr("data-json")){var e=$(this).data("json"),t=$(this).parent().data("slot");h[t]=e,e.attrs&&$.each(e.attrs,function(t,n){switch(t){case"armor":if(e.type=="ring"||e.type=="amulet")f[t]?f[t]+=parseFloat(n):f[t]=parseFloat(n);break;case"plus-block":e.type!="shield"&&(f[t]?f[t]+=parseFloat(n):f[t]=parseFloat(n));break;case"max-damage":case"min-damage":switch(e.type){case"shield":case"belt":case"boots":case"bracers":case"chest-armor":case"cloak":case"gloves":case"helm":case"pants":case"mighty-belt":case"shoulder":case"spirit-stone":case"voodoo-mask":case"wizard-hat":case"ring":case"amulet":case"quiver":case"mojo":case"source":f[t]?f[t]+=parseFloat(n):f[t]=parseFloat(n);break;default:}break;case"attack-speed":switch(e.type){case"shield":case"belt":case"boots":case"bracers":case"chest-armor":case"cloak":case"gloves":case"helm":case"pants":case"mighty-belt":case"shoulder":case"spirit-stone":case"voodoo-mask":case"wizard-hat":case"ring":case"amulet":case"quiver":case"mojo":case"source":c.push(n/100);break;default:}break;default:f[t]?f[t]+=parseFloat(n):f[t]=parseFloat(n)}}),e.socketAttrs&&$.each(e.socketAttrs,function(e,t){f[e]?f[e]+=parseFloat(t):f[e]=parseFloat(t)}),e.stats&&$.each(e.stats,function(e,n){switch(e){case"speed":t=="mainhand"&&(s[e]=parseFloat(n)),t=="offhand"&&(p=!0,s["speed-oh"]=parseFloat(n));break;case"damage":t=="mainhand"&&(s[e]={min:n.min,max:n.max}),t=="offhand"&&(s["damage-oh"]={min:n.min,max:n.max});break;case"block-amount":s[e]=n.min+"-"+n.max;break;default:s[e]?s[e]+=parseFloat(n):s[e]=parseFloat(n)}})}});var d=0;f.dexterity||(f.dexterity=0),f.vitality||(f.vitality=0),f.strength||(f.strength=0),f.intelligence||(f.intelligence=0);switch(o){case"wizard":case"witch-doctor":f.strength+=67,f.dexterity+=67,f.intelligence+=187,d=f.intelligence;break;case"barbarian":f.strength+=187,f.dexterity+=67,f.intelligence+=67,d=f.strength;break;case"demon-hunter":case"monk":f.strength+=67,f.dexterity+=187,f.intelligence+=67,d=f.dexterity}f.vitality+=127;var v=276+35*f.vitality,m=f["plus-life"]?f["plus-life"]:0,g=Math.round(v+v*m*.01),y=(s.armor?s.armor:0)+f.strength+(f.armor?f.armor:0),b=y/(3e3+y),w=Math.round(f["resist-all"]+f.intelligence/10),E={physical:w+(f["physical-resist"]?f["physical-resist"]:0),cold:w+(f["cold-resist"]?f["cold-resist"]:0),fire:w+(f["fire-resist"]?f["fire-resist"]:0),lightning:w+(f["lightning-resist"]?f["lightning-resist"]:0),poison:w+(f["poison-resist"]?f["poison-resist"]:0),arcane:w+(f["arcane-resist"]?f["arcane-resist"]:0)},S=Math.round(b*100*100)/100,x=f.dexterity,T=0,N=[[100,.1],[500,.025],[1e3,.02],[8e3,.01]],C=(s["block-chance"]?s["block-chance"]:0)+(f["plus-block"]?f["plus-block"]:0);x>0&&$.each(N,function(e,t){x>t[0]?(x-=t[0],T+=t[0]*t[1]):(T+=x*t[1],x=0)});var k=s.speed,L=1,A=s.damage,O=s.dps,M=0,_=0,D=5+(f["critical-hit"]?f["critical-hit"]:0),P=50+(f["critical-hit-damage"]?f["critical-hit-damage"]:0);if(f["max-damage"]||f["min-damage"])M=((f["max-damage"]?f["max-damage"]:0)+(f["min-damage"]?f["min-damage"]:0))/2;$.each(c,function(e,t){L+=t}),k=Math.round(k*L*100)/100;var H=O*k*(f.intelligence/100),B=H*1.74*.325;if(A)if(p){var j=s["damage-oh"],F=(A.min+A.max)/2,I=(j.min+j.max)/2,q=M,R=L,U=s.speed,z=s["speed-oh"],W=D/100*(P/100)+1,_=Math.round((F+I+q*2)*((U+z)*(R+.15)/4)*W*(d/100)*100)/100;k=Math.round(k*1.15*100)/100}else _=((A.min+A.max)/2+M)*s.speed*L*(d/100+1)*1*(D/100*(P/100)+1),_=Math.round(_*100)/100;var X=a.val();X&&$.each(X,function(e,t){typeof u[o][t]["effect"]!="undefined"&&$.each(u[o][t].effect,function(e,t){switch(e){case"plus-armor":y=Math.round(y*(1+t)*100)/100;break;case"plus-thorns":f.thorns&&(f.thorns=f.thorns*(1+t));break;case"plus-damage":_=Math.round(_*(1+t)*100)/100;break;case"flatten-resists":var n=0;$.each(E,function(e,t){t>0&&t>n&&(n=t)}),$.each(E,function(e,t){E[e]=n});break;case"plus-resist-all":E.physical=E.physical*(1+t),E.cold=E.cold*(1+t),E.fire=E.fire*(1+t),E.lightning=E.lightning*(1+t),E.poison=E.poison*(1+t),E.arcane=E.arcane*(1+t);break;case"plus-movement-speed":case"max-spirit":case"max-hatred":case"max-fury":case"life-steal":case"cc-reduce":f[e]?f[e]+=t*100:f[e]=t*100;break;case"reduce-damage":S*=1+t;break;case"health-globes":f["health-globes"]&&f["health-globes"]>0&&(f["health-globes"]=f["health-globes"]*(1+t));break;case"critical-to-dodge":T+=T*t;break;case"dexterity-to-armor":y+=f.dexterity*t;break;case"vitality-to-armor":y+=f.vitality*t;break;case"critical-hit-damage":P+=t*100;break;case"plus-mana":f["max-mana"]&&(f["max-mana"]=f["max-mana"]+f["max-mana"]*t);break;case"critical-hit":D+=t*100;break;case"switch":typeof h[t.var]!="undefined"&&$.each(t.cases,function(e,n){var r=!1;$.each(n.case.split("|"),function(e,r){r==h[t.var][t.lookup]&&$.each(n.effect,function(e,t){switch(e){case"critical-hit-damage":P+=t*100;break;case"attack-speed":k*=1+t;break;case"plus-damage":_=Math.round(_*(1+t)*100)/100;break;case"critical-hit":D+=t*100;break;default:console.log("Unhandled Switch: "+e+" ["+t+"]")}})})});break;default:console.log("Unhandled Effect: "+e+"["+t+"]")}})});var V={physical:Math.round(E.physical/(300+E.physical)*100*100)/100,cold:Math.round(E.cold/(300+E.cold)*100*100)/100,fire:Math.round(E.fire/(300+E.fire)*100*100)/100,lightning:Math.round(E.lightning/(300+E.lightning)*100*100)/100,poison:Math.round(E.poison/(300+E.poison)*100*100)/100,arcane:Math.round(E.arcane/(300+E.arcane)*100*100)/100};r.empty(),r.append(l("Strength",f.strength)),r.append(l("Dexterity",f.dexterity)),r.append(l("Intelligence",f.intelligence)),r.append(l("Vitality",f.vitality)),n.empty(),n.append(l("Armor",y)),n.append(l("Block Amount",s["block-amount"]?s["block-amount"]:"~")),n.append(l("Block Chance",C,"per")),n.append(l("Dodge Chance",Math.round(T*10)/10,"per")),n.append(l("Damage Reduction",S,"per")),n.append(l("Physical Resistance",E.physical,"",V.physical)),n.append(l("Cold Resistance",E.cold,"",V.cold)),n.append(l("Fire Resistance",E.fire,"",V.fire)),n.append(l("Lightning Resistance",E.lightning,"",V.lightning)),n.append(l("Poison Resistance",E.poison,"",V.poison)),n.append(l("Arcane/Holy Resistance",E.arcane,"",V.arcane)),n.append(l("Crowd Control Reduction",f["cc-reduce"]?f["cc-reduce"]:0,"per")),n.append(l("Missile Damage Reduction",f["range-reduce"]?f["range-reduce"]:0,"per")),n.append(l("Melee Damage Reduction",f["melee-reduce"]?f["melee-reduce"]:0,"per")),n.append(l("Thorns",f.thorns)),t.empty(),t.append(l("DPS",_)),t.append(l("Attacks per Second",k)),t.append(l("Critical Hit Chance",D,"per")),t.append(l("Critical Hit Damage",P,"per")),i.empty(),i.append(l("Maximum Life",g)),i.append(l("Total Life Bonus",m,"per")),i.append(l("Life per Second",f["life-regen"]?f["life-regen"]:0)),i.append(l("Life Steal",f["life-steal"]?f["life-steal"]:0,"per")),i.append(l("Life per Kill",f["life-kill"]?f["life-kill"]:0)),i.append(l("Life per Hit",f["life-hit"]?f["life-hit"]:0)),i.append(l("Health Globe Healing Bonus",f["health-globes"]?f["health-globes"]:0)),i.append(l("Bonus to Gold/Globe Radius",f["plus-pickup-radius"]?f["plus-pickup-radius"]:0))}function p(t,n){var r=$("#compared-slot").find(":selected").val(),i=e;itemDisplay=$("#equipped-"+r);var s=$("<a/>"),o=itemDisplay.html();s.attr("href","/i/"+n.id),s.attr("data-json",JSON.stringify(n)),s.addClass("quality-"+n.quality),s.html(n.name),s.bindTooltip(),itemDisplay.html(s),c();var u={};jQuery.extend(u,e),itemDisplay.html(o),c();var a=$("<div/>").append($("<div/>").append("Old Item: ",o),$("<div/>").append("New Item: ",s)),f=$.diff(t,u),l=$("<table/>");header=$("<tr/>").append("<th>Stat</th><th>Old</th><th>New</th><th>Diff</th>"),l.append(header),Object.keys(f.mod).length>0?($.each(f.mod,function(e,n){var r=Math.round((u[e]-t[e])*100)/100,i=$("<tr/>");i.append($("<td/>").html(e)),r>0?(i.append($("<td class='neg'/>").html(t[e])),i.append($("<td class='pos'/>").html(u[e])),i.append($("<td/>").html(r).addClass("pos"))):(i.append($("<td class='pos'/>").html(t[e])),i.append($("<td class='neg'/>").html(u[e])),i.append($("<td/>").html(r).addClass("neg"))),l.append(i)}),l.append("<tr><td colspan='10'><span class='pos'>Green = Increase</span> / <span class='neg'>Red = Decrease</span></td></tr>")):l.append("<tr><td colspan='10' style='text-align: center; font-weight: bold;'>These items are identical.</td></tr>"),a.find("div a").each(function(){$(this).bindTooltip()}),$(".compare-diff").empty().append(a,l)}var e=[],t=$("#stats-offense"),n=$("#stats-defense"),r=$("#stats-base"),i=$("#stats-life"),s=$("#stats-misc"),o=$("#character").data("class"),u={barbarian:{"pound-of-flesh":{desc:'Increases the chance of finding a health globe by <span class="skill-highlight">25%</span> and you gain <span class="skill-highlight">100%</span> additional Life from health globes.',effect:{"health-globes":1}},ruthless:{desc:'Critical Hit Chance increased by <span class="skill-highlight">5%</span>. Critical Hit Damage increased by <span class="skill-highlight">50%</span>.',effect:{"critical-hit":.05,"critical-hit-damage":.5}},"nerves-of-steel":{desc:'Your Armor is increased by <span class="skill-highlight">100%</span> of your Vitality.',effect:{"vitality-to-armor":1}},"weapons-master":{desc:'Gain a bonus based on the weapon type of your main hand weapon:<br />Swords/Daggers: <span class="skill-highlight">15%</span> increased damage<br />Maces/Axes: <span class="skill-highlight">10%</span> Critical Hit Chance<br />Polearms/Spears: <span class="skill-highlight">10%</span> attack speed<br />Mighty Weapons: <span class="skill-highlight">3</span> Fury per hit',effect:{"switch":{lookup:"type","var":"mainhand",cases:[{"case":"sword|dagger|2h-sword",effect:{"plus-damage":.15}},{"case":"mace|axe|2h-axe|2h-mace",effect:{"critical-hit":.1}},{"case":"spear|polearm",effect:{"attack-speed":.1}},{"case":"mighty|2h-mighty",effect:{}},{"case":"sword|dagger|2h-sword",effect:{"plus-damage":.15}}]}}},"berserker-rage":{desc:'You inflict an additional <span class="skill-highlight">25%</span> damage while at maximum Fury.'},"inspiring-presence":{desc:'The duration of your shouts is doubled. After using a shout you regenerate <span class="skill-highlight">1%</span> of your maximum Life per second for <span class="skill-highlight">60</span> seconds.'},bloodthirst:{desc:'Gain <span class="skill-highlight">3%</span> of all damage done as Life.',effect:{"life-steal":.03}},animosity:{desc:'Increases Fury generation by <span class="skill-highlight">10%</span> and maximum Fury is increased by <span class="skill-highlight">20</span>.',effect:{"max-fury":20}},superstition:{desc:'Reduces all non-Physical damage by <span class="skill-highlight">20%</span>. Whenever you take damage from a ranged or elemental attack, you have a chance to gain <span class="skill-highlight">3</span> Fury.'},"tough-as-nails":{desc:'Increases Armor by <span class="skill-highlight">25%</span>.<br />Thorns damage dealt increased by <span class="skill-highlight">50%</span>.',effect:{"plus-armor":.25,"plus-thorns":.5}},"no-escape":{desc:'Increases the damage of Ancient Spear and Weapon Throw by <span class="skill-highlight">10%</span>. In addition, a Critical Hit with Ancient Spear resets the cooldown while Critical Hits with Weapon Throw have a chance to return <span class="skill-highlight">14</span> Fury.'},relentless:{desc:'While below <span class="skill-highlight">20%</span> Life, all skills cost no Fury and all damage taken is reduced by <span class="skill-highlight">50%</span>.'},brawler:{desc:'As long as there are <span class="skill-highlight">3</span> enemies within <span class="skill-highlight">8</span> yards, all of your damage is increased by <span class="skill-highlight">30%</span>.'},juggernaut:{desc:'The duration of control impairing effects on you are reduced by <span class="skill-highlight">20%</span>. In addition, whenever a Stun, Fear, Immobilize or Charm is cast on you, you have a chance to recover <span class="skill-highlight">15%</span> of your maximum Life.',effect:{"cc-reduce":.2}},unforgiving:{desc:'You no longer degenerate Fury. Instead, you gain <span class="skill-highlight">1</span> Fury every <span class="skill-highlight">2</span> seconds.'},"boon-of-bul-kathos":{desc:'The cooldown on your Earthquake, Call of the Ancients, and Wrath of the Berserker skills is reduced by <span class="skill-highlight">30</span> seconds.'}},monk:{"fleet-footed":{desc:'Increases movement speed by <span class="skill-highlight">10%</span>.',effect:{"plus-movement-speed":.1}},resolve:{desc:'Damage you deal reduces enemy damage by <span class="skill-highlight">25%</span> for <span class="skill-highlight">2.5</span> seconds.'},"exalted-soul":{desc:'Increases maximum Spirit by <span class="skill-highlight">100</span>.',effect:{"max-spirit":100}},transcendence:{desc:'Every point of Spirit spent heals you for <span class="skill-highlight">62.0</span> Life.'},"chant-of-resonance":{desc:'Duration of all Mantras increased by <span class="skill-highlight">7</span> minutes. While one of your Mantras is active you gain <span class="skill-highlight">2</span> Spirit every second.'},"seize-the-initiative":{desc:'Your Armor is increased by <span class="skill-highlight">100%</span> of your Dexterity.',effect:{"dexterity-to-armor":1}},"the-guardians-path":{desc:'While dual-wielding, you gain a <span class="skill-highlight">15%</span> chance to dodge incoming attacks. While using a two-handed weapon, all Spirit generation is increased by <span class="skill-highlight">25%</span>.',effect:{"switch":{"var":"slot",cases:[{"case":"mainhand|offhand",effect:{"plus-dodge":.15}},{"case":"mainhand",effect:{"plus-spirit-regen":.25}}]}}},"sixth-sense":{desc:'Your dodge chance is increased by an amount equal to <span class="skill-highlight">30%</span> of your Critical Hit Chance.',effect:{"critical-to-dodge":.3}},pacifism:{desc:'While you are under a Stun, Fear or Charm effect, all damage taken is reduced by <span class="skill-highlight">75%</span>.'},"beacon-of-ytar":{desc:'Reduces all cooldowns by <span class="skill-highlight">15%</span>.'},"guiding-light":{desc:'Whenever you use a direct heal skill on another player you and the other player deal <span class="skill-highlight">16%</span> more damage for <span class="skill-highlight">15</span> seconds.'},"one-with-everything":{desc:"Your resistance to all elements is equal to your highest elemental resistance.",effect:{"flatten-resists":1}},"combination-strike":{desc:'Each different Spirit Generator ability you use increases your damage by <span class="skill-highlight">8%</span> for <span class="skill-highlight">3</span> seconds.'},"near-death-experience":{desc:'When receiving fatal damage, you are instead restored to <span class="skill-highlight">35%</span> of maximum Life and <span class="skill-highlight">35%</span> Spirit.'}},wizard:{blur:{desc:'Decreases melee damage taken by <span class="skill-highlight">20%</span>.',effect:{"reduce-damage":.2}},"power-hungry":{desc:'Gain <span class="skill-highlight">30</span> Arcane Power whenever you are healed by a health globe.'},evocation:{desc:'Reduces all cooldowns by <span class="skill-highlight">15%</span>.'},"glass-cannon":{desc:'Increases all damage done by <span class="skill-highlight">15%</span>, but decreases Armor and resistances by <span class="skill-highlight">10%</span>.',effect:{"plus-damage":.15,"plus-resist-all":-0.1}},prodigy:{desc:'When you deal damage with a Signature spell, you gain <span class="skill-highlight">4</span> Arcane Power.<br/>The following skills are Signature spells:<ul><li>Magic Missile</li><li>Shock Pulse</li><li>Spectral Blade</li><li>Electrocute</li></ul>'},"astral-presence":{desc:'Increases your maximum Arcane Power by <span class="skill-highlight">20</span> and Arcane Power regeneration by <span class="skill-highlight">2</span> per second.'},illusionist:{desc:'Whenever you suffer more than <span class="skill-highlight">15%</span> of your Life in a single hit, the cooldowns on Mirror Image and Teleport are automatically reset.'},"cold-blooded":{desc:'Cold damage dealt to chilled and frozen targets is increased by <span class="skill-highlight">20%</span>.'},conflaguration:{desc:'Fire damage dealt to enemies applies a burning effect, increasing all damage done to them by <span class="skill-highlight">10%</span> for 3 seconds.'},paralysis:{desc:'Lightning damage dealt to enemies has up to a <span class="skill-highlight">8%</span> chance to Stun the target for <span class="skill-highlight">2</span> seconds.'},"galvanizing-ward":{desc:'Increases the duration of your Armor spells by <span class="skill-highlight">120</span> seconds. As long as an Armor spell is active, you gain <span class="skill-highlight">310</span> Life per second. The following skills are improved:<ul><li>Energy Armor</li><li>Ice Armor</li><li>Storm Armor</li></ul>'},"temporal-flux":{desc:'Whenever you deal Arcane damage, enemies are slowed by <span class="skill-highlight">30%</span> for <span class="skill-highlight">2</span> seconds.'},"critical-mass":{desc:'Critical Hits have a chance to reduce the cooldown of your spells by <span class="skill-highlight">1</span> second.'},"arcane-dynamo":{desc:'When you deal damage with a Signature spell you may gain a Flash of Insight. After 5 Flashes of Insight, your next non-Signature spell deals <span class="skill-highlight">75%</span> additional damage. The following skills are Signature spells:<ul><li>Magic Missile</li><li>Shock Pulse</li><li>Spectral Blade</li><li>Electrocute</li></ul>'},"unstable-anomaly":{desc:'When reduced below <span class="skill-highlight">20%</span> Life, release a shockwave that knocks all enemies back. This effect cannot occur more than once every 60 seconds.'}},"demon-hunter":{"tactical-advantage":{desc:'Whenever you use Vault, Smoke Screen, or backflip with Evasive Fire you gain <span class="skill-highlight">60%</span> movement speed for <span class="skill-highlight">2</span> seconds.'},"thrill-of-the-hunt":{desc:'Every <span class="skill-highlight">10</span> seconds, your next bow attack will immobilize your target for <span class="skill-highlight">3</span> seconds.'},vengeance:{desc:'Your maximum Hatred is increased by <span class="skill-highlight">25</span>. In addition, gain <span class="skill-highlight">20</span> Hatred and <span class="skill-highlight">2</span> Discipline whenever you are healed by a health globe.',effect:{"max-hatred":25}},"steady-aim":{desc:'As long as there are no enemies within <span class="skill-highlight">10</span> yards, all damage is increased by <span class="skill-highlight">20%</span>.'},"cull-the-weak":{desc:'Damage against slowed enemies increased by <span class="skill-highlight">15%</span>.'},"night-stalker":{desc:'Critical Hits have a chance to restore <span class="skill-highlight">1</span> Discipline.'},brooding:{desc:'As long as you have not taken damage in the last <span class="skill-highlight">3</span> seconds you gain <span class="skill-highlight">1%</span> of your maximum Life per second.'},"hot-pursuit":{desc:'Whenever you are at full Hatred, movement speed is increased by <span class="skill-highlight">15%</span>.'},archery:{desc:'Gain a bonus based on the weapon type of your main hand weapon:<br />Bow: <span class="skill-highlight">15%</span> increased damage<br />Crossbows: <span class="skill-highlight">50%</span> Critical Hit Damage<br />Hand Crossbows: <span class="skill-highlight">10%</span> Critical Hit Chance',effect:{"switch":{lookup:"type","var":"mainhand",cases:[{"case":"bow",effect:{"plus-damage":.15}},{"case":"crossbow",effect:{"critical-hit-damage":.5}},{"case":"hand-crossbow",effect:{"critical-hit":.1}}]}}},"numbing-traps":{desc:'Enemies hit by Fan of Knives, Spike Trap, and Caltrops have their damage reduced by <span class="skill-highlight">25%</span> for <span class="skill-highlight">3</span> seconds.'},perfectionist:{desc:'Reduces the Discipline cost of all skills by <span class="skill-highlight">10%</span>.'},"custom-engineering":{desc:'The duration of your Caltrops, Marked for Death, Spike Trap, and Sentry is increased by <span class="skill-highlight">100%</span>.'},grenadier:{desc:'Increases Hatred generated from Grenades by <span class="skill-highlight">2</span> and reduces the Hatred cost of Cluster Arrow by <span class="skill-highlight">10</span>. Upon death, you drop a giant grenade that explodes for <span class="skill-highlight">450%</span> weapon damage as Fire.'},sharpshooter:{desc:'Gain <span class="skill-highlight">3%</span> Critical Hit Chance every second. This bonus is reset <span class="skill-highlight">1</span> second after you successfully critically hit.'},ballistics:{desc:'Damage from rockets increased by <span class="skill-highlight">50%</span>. '}},"witch-doctor":{"circle-of-life":{desc:'Whenever an enemy dies within <span class="skill-highlight">12</span> yards, there is a <span class="skill-highlight">5%</span> chance that a Zombie Dog will automatically emerge. The range of this effect is increased by items that increase your gold pickup radius.'},"jungle-fortitude":{desc:'Reduces all damage taken by you and your pets by <span class="skill-highlight">20%</span>.',effect:{"reduce-damage":.2}},"spiritual-attunement":{desc:'Maximum Mana is increased by <span class="skill-highlight">20%</span>. Regenerate <span class="skill-highlight">1%</span> of your maximum Mana per second.',effect:{"plus-mana":.2}},"gruesome-feast":{desc:'Whenever you are healed by a health globe, you gain <span class="skill-highlight">10%</span> of your maximum Mana and <span class="skill-highlight">10%</span> Intelligence for <span class="skill-highlight">10</span> seconds. The Intelligence bonus can stack up to <span class="skill-highlight">5</span> times.'},"bad-medicine":{desc:'Whenever you deal Poison damage to an enemy, their damage is reduced by <span class="skill-highlight">20%</span> for <span class="skill-highlight">3</span> seconds.'},"blood-ritual":{desc:'<span class="skill-highlight">15%</span> of Mana costs are paid with Life. In addition, you regenerate <span class="skill-highlight">1%</span> of your maximum Life per second.'},"zombie-handler":{desc:'You can have <span class="skill-highlight">4</span> Zombie Dogs summoned at one time. The health of your Zombie Dogs and Gargantuan is increased by <span class="skill-highlight">20%</span>.'},"pierce-the-veil":{desc:'All of your damage is increased by <span class="skill-highlight">20%</span>, but your Mana costs are increased by <span class="skill-highlight">30%</span>.',effect:{"plus-damage":.2}},"fetish-sycophants":{desc:'Whenever you cast a physical realm spell, you have a <span class="skill-highlight">3%</span> chance to summon a dagger-wielding Fetish to fight by your side for <span class="skill-highlight">60</span> seconds.'},"spirit-vessel":{desc:'Reduces the cooldown of your Horrify, Spirit Walk, and Soul Harvest spells by <span class="skill-highlight">2</span> seconds. In addition, the next time you receive fatal damage, you automatically enter the spirit realm for <span class="skill-highlight">3</span> seconds and heal to <span class="skill-highlight">10%</span> of your maximum Life. This effect cannot occur more than once every <span class="skill-highlight">90</span> seconds.'},"rush-of-essence":{desc:'Spirit spells return <span class="skill-highlight">30%</span> of their Mana cost over <span class="skill-highlight">10</span> seconds.'},"vision-quest":{desc:'Any time you have <span class="skill-highlight">4</span> or more skills on cooldown, your Mana regeneration is increased by <span class="skill-highlight">300%</span>.'},"fierce-loyalty":{desc:'All your pets get <span class="skill-highlight">100%</span> of the benefit of your Thorns and Life regeneration items.'},"grave-injustice":{desc:'Whenever an enemy dies within <span class="skill-highlight">8</span> yards, regain <span class="skill-highlight">1%</span> of your maximum Life and Mana and the cooldown on all of your abilities is reduced by <span class="skill-highlight">1</span> second. This range is extended by items that increase your gold pickup radius.'},"tribal-rites":{desc:'The cooldowns of your Fetish Army, Big Bad Voodoo, and Hex abilities are reduced by <span class="skill-highlight">25%</span>.'}}},a=$("#passives"),f=$("#passive-display");$.each(u[o],function(e,t){var n="";typeof activePassives!="undefined"&&$.each(activePassives,function(t,r){e==r&&(n='selected="selected"')}),a.append($("<option value='"+e+"' "+n+"/>").html(e.replace(/\-/g," ").capitalize()))}),a.select2({placeholder:"Which passives skills are you using?",allowClear:!0}),a.bind("change",function(){var e=$(this).val()?$(this).val():[];(!e||activePassives.length!=e.length)&&$.ajax({data:{a:"passive-skills",passives:e}}),f.empty(),$.each(e,function(e,t){var n=u[o][t],r=$("<span/>").append($("<strong>").html(t.replace(/\-/g," ").capitalize()+": "),n.desc);f.append($("<li/>").html(r))}),c()}),a.trigger("change"),$(".gear-change").click(function(){var e=$(this).data("item-type"),t=$("#equipped-"+e);$.ajax({url:"/item/fetch/type/"+e,cache:!1,dataType:"json",success:function(n){var r=$("#available-gear"),i=$("#gear-change");r.html(""),r.append("<option value=''>Nothing</option>"),$.each(n,function(e,t){var n=$.parseJSON(t),i=$("<option/>");i.attr("value",e),i.attr("data-json",t),i.html(n.name),i.bindTooltip(),r.append(i)}),i.dialog({width:800,modal:!0,buttons:{Equip:function(){var n=$(this);$.ajax({data:{a:"equip",slot:e,newItem:r.val()},success:function(e){if(r.val()!=""){var i=$("<a/>"),s=r.find(":selected"),o=$.parseJSON(s.attr("data-json"));i.attr("href","/i/"+r.val()),i.attr("data-json",JSON.stringify(o)),i.addClass("quality-"+o.quality),i.html(o.name),i.bindTooltip(),t.html(i)}else t.html("Nothing");n.dialog("close"),c()}})},Cancel:function(){$(this).dialog("close")}}})}})}),c(),$("#character").tabs();var h=$("#compare-to");$("#compared-slot").bind("change",function(){var e=$(this).val();$.ajax({url:"/item/fetch/type/"+e,cache:!1,dataType:"json",success:function(e){h.html(""),h.append("<option value=''>Nothing</option>"),$.each(e,function(e,t){var n=$.parseJSON(t),r=$("<option/>");r.attr("value",e),r.attr("data-json",t),r.html(n.name),r.bindTooltip(),h.append(r)})}})}),h.bind("change",function(){var t={};jQuery.extend(t,e);var n=$("#compared-slot").find(":selected").val(),r=$("#equipped-"+n+" a").data("json"),i=$(this).find(":selected").data("json"),s=p(t,i)})})